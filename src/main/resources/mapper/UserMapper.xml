<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kyoni.plog.mapper.UserMapper">
	<select id="getUser" resultType="com.kyoni.plog.domain.UserEntity">
		SELECT seq as 'seq'
			, email as 'email'
			, nicname as 'nicname'
			, pwd as 'pwd'
		FROM member
		WHERE email = #{email}
	</select>
	
	<select id="getUserRoles" resultType="com.kyoni.plog.domain.UserRoleEntity">
		SELECT seq as 'seq'
			, member_id as 'member_id'
			, authority_code as 'roleName'
		FROM member_authority
		WHERE member_id = #{memberId}
	</select>
	
	<insert id="addUser" parameterType="com.kyoni.plog.vo.UserVO">
		INSERT INTO member (email, nicname, pwd)
		VALUES(#{email}, #{nicname}, #{pwd})
	</insert>
</mapper>